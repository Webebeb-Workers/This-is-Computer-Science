# 데이터베이스의 큰 그림

## 데이터베이스와 DBMS

> [!NOTE]
> 데이터베이스는 여러 사람이 공유하여 사용할 목적으로 체계화해 통합, 관리하는 데이터의 집합<br>
> 원하는 **기능을 동작시키기 위해 마땅히 저장해야 하는 정보의 집합**

데이터베이스는 웹 서비스에 있어 심장과 같은 역할 수행. 저장되는 데이터와 방식에 따라 서비스의 정체성과 성능이 달라짐. 이를 관리하기 위한 수단이 바로 DBMS - Database Management System.

### DBMS의 종류

DBMS는 크게 두 유형으로 구분 가능.

1. **관계형 데이터베이스 관리 시스템(RDBMS)**
   - MySQL, Oracle, PostgreSQL, SQLite, MariaDB, Microsoft SQL Server 등
2. **NoSQL 데이터베이스 관리 시스템**
   - MongoDB, Redis 등

2023년 개발자 설문조사에 따르면, RDBMS가 여전히 높은 점유율 차지. MySQL과 그 오픈소스 버전인 MariaDB의 합산 점유율이 가장 높음.

### 서버로서의 DBMS

DBMS는 일반 응용 프로그램과 달리 사용자의 프로그램과 상호작용하며 실행되는 특성 보유. 클라이언트-서버 모델과 유사하게 동작.

#### SQL(Structured Query Language)

RDBMS에서 데이터를 조작하고 관리하기 위한 언어로, 크게 네 종류로 분류.

- **데이터 정의 언어 - DDL(Data Definition Language)**: CREATE, ALTER, DROP, TRUNCATE
- **데이터 조작 언어 - DML(Data Manipulation Language)**: SELECT, INSERT, UPDATE, DELETE
- **트랜잭션 제어 언어 - DCL(Data Control Language)**: GRANT, REVOKE
- **데이터 제어 언어 - TCL(Transaction Control Language)**: COMMIT, ROLLBACK, SAVEPOINT

## 파일 대신 데이터베이스를 이용하는 이유

> [!NOTE]
> 단순 파일 입출력 대신 데이터베이스를 사용하는 이유는 다양한 데이터 관리 기능과 안정성, 효율성 때문

1. **데이터 일관성 및 무결성 제공이 어려움**
   - 여러 사용자/프로그램이 동시에 데이터 접근 시 레이스 컨디션 발생 가능성
   - 모든 접근에 동기화 도구 사용이 번거로움
   - 개발자가 데이터 무결성을 일일이 검사하기 어려움
2. **불필요한 중복 저장이 많아짐**
   - 파일로 데이터 관리 시 같은 정보가 여러 파일에 중복 저장되는 문제 발생
   - 이로 인해 저장 공간 낭비 초래
3. **데이터 변경 시 연관 데이터 변경이 어려움**
   - 한 파일의 데이터 변경 시 다른 파일에서도 관련 데이터를 일일이 변경해야 함
4. **정교한 검색이 어려움**
   - 복합 조건을 활용한 검색은 파일 검색으로 구현하기 어려움
5. **백업 및 복구가 어려움**
   - 데이터베이스는 백업과 복구 기능을 기본 제공하나, 파일 입출력은 이런 기능 부족

## 데이터베이스의 저장 단위와 트랜잭션

### 데이터베이스의 저장 단위

> [!NOTE]
> 데이터베이스에는 다양한 속성을 가진 독립적 객체인 엔티티가 저장, 이는 데이터베이스 유형에 따라 다른 형태로 구현

#### 주요 개념

- **엔티티(Entity)**: 독립적으로 존재할 수 있는 객체, 실세계의 객체를 데이터베이스에 표현
  - 제품, 사용자, 주문과 같이 독립적으로 어떠한 특성을 가진, 식별 가능한 대상을 의미
- **속성(Attribute)**: 엔티티의 특성
  - 같은 속성을 공유하는 개별 엔티티는 같은 엔티티 집합에 속함
- **엔티티 집합**: 같은 속성을 공유하는 개별 엔티티들의 모음

<img width="600" alt="image" src="https://github.com/user-attachments/assets/dc9bd19f-d47a-4b93-8ee2-f3c4dc6c886f" />

> [!TIP]
> 엔티티의 속성이 가질 수 있는 값의 집합은 도메인(domain)이라고 함 <br>
> 가령 '구매자 성별' 속성이 가질 수 있는 도메인은 {남자, 여자}임

### RDBMS와 NoSQL의 저장 단위 비교

엔티티들은 RDBMS에서는 테이블 안에, MongoDB에서는 컬렉션 안에 저장됨.

#### RDBMS의 저장단위

- **릴레이션(테이블)**: 이차원 테이블 형태의 엔티티 집합
- **레코드(행)**: 데이터베이스에 기록된 각각의 엔티티
- **필드(열)**: 데이터베이스에 저장된 엔티티 속성

#### NoSQL(MongoDB)의 저장단위

- **컬렉션**: 엔티티의 집합
- **도큐먼트**: JSON 형태의 엔티티
- **필드**: JSON의 키

> [!NOTE]
> 필드의 수는 차수(degree)라고도 부름<br>
> 한 필드에 대한 고유 값의 수는 카디날리티(Cardinality)라고 부름<br>
> 즉, 카디날리티가 낮을수록 중복된 속성이 많음을 시사함

### 스키마

> [!NOTE]
> 스키마는 데이터베이스에 저장되는 레코드의 구조와 제약 조건을 정의한 것으로, 레코드가 지켜야 할 틀이자 청사진

- **RDBMS**: 명확한 스키마 정의 필요, 모든 레코드가 동일한 구조 준수
- **NoSQL**: 스키마-리스(schema-less) 특성으로, 유연한 데이터 구조 허용

### 트랜잭션과 ACID

> [!NOTE]
> 트랜잭션은 데이터베이스와의 논리적 상호작용 단위로, 데이터베이스가 처리하는 작업의 단위

초당 트랜잭션(TPS, Transactions Per Second)이라는 지표로 데이터베이스의 작업 성능을 나타내기도 함.

> [!TIP]
> 트랜잭션이라는 용어나 TPS라는 지표는 주로 데이터베이스에서 언급되는 용어이지만, 데이터베이스에서만 사용되는 용어는 아님<br>
> 메모리 트랜잭션이나 전자상거래의 거래 단위로도 사용됨

트랜잭션이 지켜야 하는 ACID 특성은 아래와 같다.

#### 1. 원자성(Atomicity)

- 트랜잭션 결과가 모두 성공하거나 모두 실패하는 성질
- "All or Nothing" 원칙 준수
- 반드시 커밋되거나 롤백되는 성질

> [!TIP]
> 커밋(commit): 트랜잭션을 성공적으로 수행하여 트랜잭션을 종료하는 것, 트랜잭션으로 인한 변경 사항을 확정<br>
> 롤백(rollback): 이전 트랜잭션을 취소하는 작업
>
> <img width="600" alt="image" src="https://github.com/user-attachments/assets/c3a4c50a-3f47-4ea0-b826-c6bfaa57019b" />

#### 2. 일관성(Consistency)

- 트랜잭션 전후로 데이터베이스가 일관된 상태 유지
- '일관된 상태'는 데이터베이스가 지켜야 하는 규칙들을 지키는 상태

#### 3. 격리성(Isolation)

- 동시에 수행되는 여러 트랜잭션이 서로 간섭하지 않도록 보장
- 레이스 컨디션 방지를 위한 성질

#### 4. 지속성(Durability)

- 트랜잭션이 성공적으로 완료된 후 결과가 영구적으로 반영
- 시스템 장애 발생 시에도 완료된 트랜잭션 결과는 보존

---

> [!TIP]
> 데이터베이스 학습 과정에서는 RDBMS의 기본, SQL, 효율적 쿼리, 데이터베이스 설계, NoSQL까지 단계적으로 학습 필요
> ![](https://github.com/user-attachments/assets/b57a694b-6ac4-45ae-bdc3-6e38f78912bd)
