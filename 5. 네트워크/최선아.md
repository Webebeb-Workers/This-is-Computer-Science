# 1. 네트워크의 큰 그림

## 네트워크의 기본 구조

<img width="507" alt="Image" src="https://github.com/user-attachments/assets/acfb1b4e-0524-4c29-b99e-c899337ddc71" />

- 네트워크는 노드(네트워크 기기)와 간선(유무선 통신 매체)으로 이루어진 그래프 형태
- 네트워크 상에서 노드와 노드 사이의 연결 구조는 **네트워크 토폴로지**라고 부름
- 노드가 어떻게 연결/배치 되느냐에 따라 망형, 트리형, 링형 등의 유형으로 나눌 수 있음

  <img width="549" alt="Image" src="https://github.com/user-attachments/assets/b332b2c3-33dd-4f21-9e6a-a8b024fcea32" />

- **호스트**: 네트워크를 통해 주고받는 정보를 최초로 송신/수신하는 노드
  - ex) 노트북의 웹 브라우저를 통해 구글 홈페이지에 접속했다면 노트북과 구글 서버 컴퓨터가 호스트임
  - **클라이언트**: 요청을 보내는 호스트
  - **서버**: 응답을 보내는 호스트
  - 클라이언트와 서버는 주고받는 정보의 방향(요청과 응답)에 따라 부여된 역할
- **중간 노드**: 네트워크 그래프에서 중간에 위치한 노드, 호스트가 주고받는 정보들을 원하는 수신지까지 안정적으로 전송하는 역할을 함
  - ex) 스위치, 라우터, 공유기

### LAN과 WAN

- 네트워크는 규모에 따라 LAN과 WAN으로 나뉨
- **LAN**
  - 근거리 네트워크를 의미
  - 가정이나 기업처럼 비교적 가까운 거리를 연결하는 한정된 공간에서의 네트워크를 말함
- **WAN**
  - 원거리 네트워크를 의미
  - WAN을 통해 LAN 간 통신이 이루어짐
  - 인터넷을 가능하게 만드는 네트워크
  - ISP(Internet Service Provider)라는 인터넷 서비스 업체가 구축하고 관리함
    - ex) KT, LG 유플러스, SK브로드밴드

### 패킷 교환 네트워크

- 네트워크를 통해 주고받는 데이터는 한 번에 송수신되지 않고, 여러 데이터로 쪼개져서 송수신됨
- **패킷**: 네트워크를 통해 송수신되는 데이터의 단위
- **패킷 교환 네트워크**: 패킷 단위로 주고받는 정보를 쪼개서 송수신하고 수신지에서 재조립하여 패킷을 주고받는 네트워크, 오늘날의 대부분의 네트워크
- 하나의 패킷은 **페이로드**와 **헤더**로 구성되어 있음, 때로는 **트레일러**라는 정보가 포함되기도 함
- **페이로드**: 패킷에서 송수신하고자 하는 데이터
- **헤더**, **트레일러**: 패킷에 추가되는 부가 정보

> 트레일러 정보는 예를 들어 뭐가 있을까

### 주소의 개념과 전송 방식

- 네트워크 상의 두 호스트가 올바르게 정보를 주고받기 위해서는 서로를 특정할 수 있는 정보, 즉 주소가 필요함
- **주소**: 패킷의 헤더에 명시되는 정보, 네트워크에서 사용되는 대표적인 주소로는 **IP 주소**와 **MAC 주소**가 있음
- 주소를 바탕으로 다양한 수신지 유형을 지정해 패킷을 보낼 수 있음
- **유니캐스트**: 송신지와 수신지가 일대일로 메시지를 주고받는 전송 방식
- **브로드캐스트**: 네트워크상의 모든 호스트에게 메시지를 전송하는 전송 방식
  - **브로드캐스트 도메인**: 브로드캐스트가 전송되는 범위
  - 호스트가 같은 브로드캐스트 도메인에 속해 있는 경우 같은 LAN에 속해 있다고 간주
- **멀티캐스트**: 네트워크 내의 동일 그룹에 속한 호스트에게만 전송하는 방식
- **애니캐스트**: 네트워크 내의 동일 그룹에 속한 호스트 중 가장 가까운 호스트에게 전송하는 방식

## 두 호스트가 패킷을 주고받는 과정

- 호스트가 서로 주고받는 정보를 이해하기 위한 규칙인 프로토콜과 네트워크 참조 모델을 알아보고, 두 호스트가 패킷을 주고받는 과정 전반에 대해 이해하자

### 프로토콜

- **프로토콜**: 네트워크에서 통신을 주고받는 노드 간의 합의된 규칙이나 방법
- 패킷을 주고받는 호스트와 네트워크 장비들이 서로 주고받는 정보를 이해하려면 같은 프로토콜을 이해해야 하고, 같은 프로토콜로 통신해야 함
- 프로토콜의 종류
  - **IP**, **ARP**, ICMP, **TCP**, **UDP**, DHCP, DNS, **HTTP**, SSL/TLS, HTTPS
- 프로토콜마다 목적과 특징이 다름
  - IP: 네트워크 간의 주소를 지정한다는 목적
  - ARP: IP 주소와 MAC 주소를 대응시킨다는 목적
  - HTTPS: 보안상 HTTP에 비해 안전하다는 특징
  - TCP: UDP에 비해 신뢰성이 높다는 특징
- 패킷은 프로토콜의 목적과 특징에 따라 그에 맞는 패킷 헤더를 가짐 (프르토콜에 따라 패킷의 내용이 달라짐) 따라서 프로토콜의 목적과 특징을 이해하기 위해서는 프로토콜의 패킷 헤더를 분석해보면 좋음

  <img width="565" alt="Image" src="https://github.com/user-attachments/assets/65730efe-8f7b-467f-b5a5-d5567ddbc0be" />

### 네트워크 참조 모델

<img width="578" alt="Image" src="https://github.com/user-attachments/assets/8be9792b-2f10-4702-a670-34dcc8a8eb90" />

- 패킷을 주고받는 과정에는 정형화된 순서가 있고, 계층적으로 표현할 수 있음
- **네트워크 참조 모델**: 통신이 이루어지는 단계를 계층적으로 표현한 것
- 패킷을 송신하는 쪽에서는 상위 계층에서 하위 계층으로 정보를 보내고, 패킷을 수신하는 쪽에서는 하위 계층에서 상위 계층으로 정보를 받아들임
- 네트워크 참조 모델에서 각각의 계층이 하는 일이 명확하게 정해져 있음
  - 계층별 목적에 맞는 프로토클과 장비를 구성하면 네트워크의 구성과 설계, 문제의 진단과 해결이 용이해짐
  - 대표적인 네트워크 참조 모델인 **OSI 모델**과 **TCP/IP 모델**에 대해 알아보자

#### OSI 모델

<img width="219" alt="Image" src="https://github.com/user-attachments/assets/db70636d-8481-4225-bf64-cfb1b39e8f8e" />

- 국제 표준화 기구에서 만든 네트워크 참조 모델
- 통신 단계를 7개의 계층으로 나눔
- 물리 계층, 데이터 링크 계층, 네트워크 계층, 전송 계층, 세션 계층, 표현 계층, 응용 계층으로 구성돼 있음

##### 1. 물리 계층

- 가장 최하위 계층으로, 비트 신호를 주고 받는 계층
- 컴퓨터는 0과 1만을 이해할 수 있기 때문에 네트워크를 통해 주고받는 정보 또한 0과 1로 이루어진 신호로 구성됨
- 이러한 0과 1로 이루어진 신호를 유무선 통신 매체를 통해 운반하는 계층

##### 2. 데이터 링크 계층

- 같은 LAN에 속한 호스트끼리 올바르게 정보를 주고받기 위한 계층
- 이를 위해 같은 네트워크에 속한 호스트를 식별할 수 있는 주소 MAC 주소를 사용함
- 물리 계층을 통해 주고받는 정보에 오류가 없는지 확인하기도 함
- 물리 계층과 데이터 링크 계층은 서로 밀접하게 연간돼 있으며, 하드웨어와 밀접하게 맞닿아 있는 계층임

##### 3. 네트워크 계층

- 네트워크 간 통신을 가능하게 하는 계층
- 데이터 링크 계층이 같은 LAN에 속한 호스트끼리 올바르게 정보를 주고받기 위해 필요한 계층이라면, 네트워크 계층은 LAN을 넘어 다른 네트워크와 통신을 주고받기 위해 필요한 계층임
- 네트워크 간 통신 과정에서 호스트를 식별할 수 있는 주소(IP 주소)가 필요함
- 대표적 프로토콜: IP

##### 4. 전송 계층

- 네트워크를 통해 송수신되는 패킷은 전송 도중 유실될 때도 있고, 순서가 뒤바뀔 때도 있음
- 이러한 상황에 대비해 신뢰성 있는 전송을 가능하게 하는 계층
- '포트' 라는 정보를 통해 특정 응용 프로그램과의 연결 다리 역할을 수행하는 계층
- 대표적 프로토콜: TCP, UDP

##### 5. 세션 계층

- 응용 프로그램 간의 연결 상태를 의미하는 '세션'을 관리하기 위한 계층
- 응용 프로그램 간의 연결 상태를 유지하거나 새롭게 생성하고, 필요하다면 연결을 끊는 역할을 함

##### 6. 표현 계층

- 번역가와 같은 역할을 하는 계층
- 인코딩과 압축, 암호화와 같은 작업을 수행함
- 세션 계층과 표현 계층은 다른 계층과 달리, 두 계층을 명확하게 구분하지 않거나 응용 계층에 포함하여 간주하는 경우가 많음

##### 7. 응용 계층

- 사용자와 가장 밀접하게 맞닿아 있어 여러 네트워크 서비스를 제공하는 계층
- 대표적 프로토콜: HTTP, HTTPS, DNS

#### TCP/IP 모델

<img width="220" alt="Image" src="https://github.com/user-attachments/assets/e41eeffb-f7aa-4df7-ba1e-9c03c1ea2bde" />

- TCP/IP 4계층이라고도 불림
- 네트워크 액세스 계층, 인터넷 계층, 전송 계층, 응용 계층으로 구성돼있음
- OSI 모델은 네트워크의 이론적 기술을 목적으로 사용하는 반면, TCP/IP 모델은 구현과 프로토콜에 중점을 둔 네트워크 참조 모델임

##### 1. 네트워크 액세스 계층

- 링크 계층 또는 네트워크 인터페이스 계층이라고도 부름
- OSI 모델의 데이터 링크 계층과 유사

##### 2. 인터넷 계층

- OSI 모델의 네트워크 계층과 유사

##### 3. 전송 계층

- OSI 모델의 전송 계층과 유사

##### 4. 응용 계층

- OSI 모델의 세션 계층, 표현 계층, 응용 계층을 합친 것과 유사

### 캡슐화와 역캡슐화

<img width="572" alt="Image" src="https://github.com/user-attachments/assets/f0e51399-b610-4c10-aa7a-6ea46b8661a4" />

- 프로토콜과 네트워크 참조 모델을 토대로 이루어지는 패킷의 송수신 과정 중 송신 과정에서는 캡슐화가 이뤄지고, 수신 과정에서는 역캡슐화가 이뤄짐
- 각 계층에서는 어떤 정보를 송신할 때 상위 계층으로부터 내려받은 패킷을 페이로드로 삼아, 각 계층에 포함된 프로토콜에 따라 헤더 혹은 트레일러를 덧붙인 다음 하위 계층으로 전달함 즉, 상위 계층의 패킷이 하위 계층의 페이로드로 간주됨
- **캡슐화**: 송신 과정에서 헤더 및 트레일러를 추가해 나가는 과정
- **역캡슐화**: 캡슐화 과정에서 붙인 헤더 및 트레일러를 각 계층에서 확인한 뒤 제거하는 과정
- 각 계층에서 주고받는 패킷(정보)를 지칭하는 이름이 다름

    <img width="565" alt="Image" src="https://github.com/user-attachments/assets/5b133a42-3745-4577-acc5-432f6883b4cb" />
