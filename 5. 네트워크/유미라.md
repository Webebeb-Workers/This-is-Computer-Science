# 1. 네트워크의 큰 그림
## 네트워크의 기본 구조
- 그래프

#### 네트워크 토폴로지
![image](https://github.com/user-attachments/assets/834ca60c-099b-464e-9732-826aac232182)

- 네트워크 상에서 노드와 노드 사이의 연결 구조

#### 호스트
![image](https://github.com/user-attachments/assets/aa5eb396-7a3a-4e07-b41e-3296b95ab125)

- 네트워크의 가장자리에 위치하면서 네트워크를 통해 주고받는 정보를 최초로 송신하고 최종 수신하는 노드
- **클라이언트** : 요청을 보내는 호스트
- **서버** : 응답을 보내는 호스트

### LAN과 WAN
![image](https://github.com/user-attachments/assets/a009fb85-68b8-4f58-97db-b0d6089cc8b4)

#### LAN
- 가정이나 기업처럼 비교적 가까운 거리를 연결하는 한정된 공간에서의 네트워크
- 공유기

#### WAN
- 인터넷을 가능하게 만드는 원거리 네트워크
- **ISP** : 인터넷 서비스 업체

### 패킷 교환 네트워크
#### 패킷
- 네크워크를 통해 송수신되는 데이터의 단위
- **페이로드** : 패킷에서 송수신하고자 하는 데이터
- **헤더(및 트레일러)** : 패킷에 추가되는 부가 정보

### 주소의 개념과 전송 방식
#### 주소
- 패킷의 헤더에 명시되는 정보
- IP 주소, MAC 주소

#### 전송 방식
- **유니캐스트** : 일대일로 메시지를 주고받는 전송 방식
- **브로드캐스트** : 네트워크 상의 모든 호스트에게 메시지를 전송하는 방식
- **멀티캐스트** : 네트워크 내의 동일그룹에 속한 호스트에게만 전송하는 방식
- **애니캐스트** : 네트워크 내의 동일 그룹에 속한 호스트 중 가장 가까운 호스트에게 전송하는 방식

## 두 호스트가 패킷을 주고받는 과정
#### 프로토콜
- 네트워크 통신을 주고받는 노드 간의 합의된 규칙이나 방법

#### 네트워크 참조 모델
![image](https://github.com/user-attachments/assets/07ff54de-22ff-4c62-a9c6-5bee4e016000)

- 통신이 이루어지는 단계를 계층적으로 표현한 것

### OSI 모델
- ISO에서 만든 네트워크 참조 모델
- 이론적 기술 목적

##### 계층 별 역할
- **물리 계층** : 가장 최하위 계층으로 비트 신호를 주고 받는 계층
- **데이터 링크 계층** : 같은 LAN에 속한 호스트끼리 올바르게 정보를 주고받기 위한 계층
- **네트워크 계층** : 네트워크 간 통신을 가능하게 하는 계층
- **전송 계층** : 신뢰성 있는 전송을 가능하게 하는 계층
- **세션 계층** : 응용 프로그램 간의 연결 상태를 의미하는 세션을 관리하기 위한 계층
- **표현 계층** : 인코딩과 압축, 암호화 등을 담당하며, 번역가 역할을 수행하는 계층
- **응용 계층** : 네트워크 서비스를 제공하는 계층

### TCP/IP 모델
- 구현과 프로토콜에 중점을 둔 네트워크 참조 모델

#### 계층 별 역할
- **네트워크 액세스 계층** : 데이터 링크 계층과 유사
- **인터넷 계층** : 네트워크 계층과 유사
- **전송 계층** : 전송 계층과 유사
- **응용 계층** : 세션 계층, 표현 계층, 응용 계층을 합친 것과 유사 

### 캡슐화와 역캡슐화
![image](https://github.com/user-attachments/assets/fcd37a8f-7cd0-489a-81ec-73540edff9ea)

- **캡슐화** : 송신 과정에서 상위 계층으로부터 내려 받은 패킷을 페이로드 삼아, 헤더(및 트레일러)를 추가해 나가는 과정
- **역캡슐화** : 수신 과정에서 헤더(및 트레일러)를 각 계층에서 확인한 뒤 제거하는 과정 

#### 패킷의 이름
![image](https://github.com/user-attachments/assets/407cdf6c-3c59-4649-9dd3-02502a69f1e8)

# 2. 물리 계층과 데이터 링크 계층
## 이더넷
- 통신 매체를 통해 신호를 송수신하는 방법, 데이터 링크 계층에서 주고받는 데이터(프레임) 형식 등이 정의된 기술

### 이더넷 표준
![image](https://github.com/user-attachments/assets/9fe8a07a-b624-4e68-83f6-80f989e88389)

- 오늘날의 (유선)LAN 대부분이 이더넷 표준을 따르기 때문에 대다수의 LAN 장비들이 특정 이더넷 표준을 따른다.
- 이더넷 표준이 달라지면 통신 매체의 종류를 비롯한 신호 송수신 방법, 나아가 최대 지원 속도도 달라질 수 있다. 

### 이더넷 프레임
![image](https://github.com/user-attachments/assets/379ce767-7566-43aa-8c7a-aca1af103772)

- 이더넷 기반의 네트워크에서 주고받는 프레임

#### 프리앰블
- 송수신지 동기화를 위해 사용되는 8바이트 크기의 정보로, 프리앰블 비트를 통해 현재의 이더넷 프레임이 수신되고 있다는 사실을 알아차린다.

#### 송수신지 MAC 주소
- 물리적 주소로, 네트워크 인터페이스마다 하나씩 부여되는 주소이다.

#### 타입/길이
- 명시된 크기가 05DC(16) 이하이면 이 필드는 프레임의 크기를 나타내고 0600(16) 이상이면 타입을 나타낸다.

#### 데이터
- 페이로드, 즉 상위 계층으로 전달하거나 전달 받을 데이터
- 최대 크기는 일반적으로 1500바이트 이하

#### FCS
- 트레일러
- 프레임의 오류가 있는지의 여부를 확인하기 위한 필드로, CRC라는 오류 검출용 값이 명시된다.

## 유무선 통신 매체
### 유선 매체 - 트위스티드 페어 케이블
![image](https://github.com/user-attachments/assets/a7cdb8cb-cfbc-4c28-a206-6f5df87a4389)

- 두 가닥씩 꼬아져 있는 구리선을 통해 전기적으로 신호를 주고 받는 통신 매체
- 트위스티드 페어 케이블의 성능은 카테고리에 따라 다르다.

![image](https://github.com/user-attachments/assets/9f7423f4-695a-4965-8ccf-0adee25beab7)

- **노이즈** : 전기 신호에 왜곡을 줄 수 있는 주변 잡음
- **STP** : 브레이드 실드로 노이즈를 감소시킨 케이블
- **UTP** : 아무것도 감싸지 않아 구리선만 있는 케이블

### 무선 매체 - 전파와 WiFi
- **전파** : 약 3kHz부터 3THz 사이의 진동수를 갖는 전자기파

#### 와이파이
![image](https://github.com/user-attachments/assets/6982cf10-6141-4653-93dd-2020b26a1bcb)

- IEEE 802.11 표준을 따르는 무선 LAN 기술
- 주로 사용되는 주파수 대역은 2.4GHz 또는 5GHz

![image](https://github.com/user-attachments/assets/afbbd6ba-fde1-4796-9ae2-6b28f917a5ba)
- 주파수 대역은 같은 대역을 사용하는 서로 다른 무선 네트워크를 구분하기 위해 **채널**이라는 하위 주파수 대역으로 세분화하고, 해당 채널 대역에서 무선 통신이 이루어진다.
- 채널은 자동 설정되지만, 특정 채널을 사용하도록 수동으로 설정할 수도 있다.
- 무선 네트워크의 성능 저하를 방지하려면 신호가 중첩되지 않는 채널을 사용하는 것이 중요하다.

## 네트워크 인터페이스: NIC
- 네트워크 상에서 노드와 통신 매체가 연결되는 지점

#### NIC
![image](https://github.com/user-attachments/assets/3437115f-76ed-4223-bfd5-49f9c2d480c1)

- 통신 매체의 신호를 호스트가 이해하는 프레임으로 변화하거나 호스트가 이해하는 프레임을 통신 매체의 신호로 변환하는 역할을 수행하는 하드웨어

## 허브와 스위치
### 물리 계층의 허브
![image](https://github.com/user-attachments/assets/f6672314-11a4-45bd-9135-9736a8f82615)

- 여러 대의 호스트를 연결하는 장치

#### 특징
- 전달 받은 신호를 모든 포트로 내보낸다.
- 반이중 모드로 통신한다.
  - **반이중** : 송신 또는 수신을 번달아 가면서 수행해야 하는 통신 방식 (동시 송수신 불가능)
  - **전이중** : 동시 송수신이 가능한 상태 

### 데이터 링크 계층의 스위치
- 허브의 한계를 보완하기 위한 네트워크 장비
- 전달받은 신호를 목적지 호스트가 연결된 포트로만 보내고, 전이중 모드를 지원한다.

#### MAC 주소 학습
![image](https://github.com/user-attachments/assets/ed7a16f4-bf20-4aaa-8f61-7433fe054248)

- 프레임 속 MAC 주소를 토대로 현재 어떤 포트에 어떤 MAC 주소를 가진 호스트가 연결되어 있는지 파악한다.
- 스위치가 전달받은 신호를 목적지 호스트가 연결된 포트로만 내보낼 수 있는 이유는 MAC 주소 테이블을 생성하고 참조할 수 있기 때문이다. 

#### VLAN
![image](https://github.com/user-attachments/assets/a2750fe2-1769-4d18-bec7-a7abb2bd4009)

- 가상의 LAN
- 같은 스위치에 연결된 모든 호스트를 하나의 네트워크로 간주하고 싶지 않을 때, 여러 논리적인 네트워크로 나누고 싶을 때 사용된다.
- 서로 통신을 주고 받으려면 네트워크 계층 이상의 장비가 필요하다.

# 3. 네트워크 계층 - IP
## IP의 목적과 특징
### 주소 지정과 단편화
#### 주소 지정
![image](https://github.com/user-attachments/assets/ea2a33b7-dec0-44a2-a84a-f81ccc9d9555)

- 네트워크(LAN) 간의 통신 과정에서 호스트를 특정하는 것
- 하나의 IP 주소는 총 4바이트의 크기로 구성되고, 숫자당 8비트로 표현되므로 0 ~ 255 범위의 10진수 4개로 표기된다.

![image](https://github.com/user-attachments/assets/d4ffb9d5-3e1b-4b39-b26a-d309b7f332b4)

- 라우터 : IP 주소를 기반으로 패킷의 최적 경로를 설정하여 목적지까지 라우팅하는 네트워크 장비
- 라우팅 : 라우터가 IP 패킷을 전달할 최적의 경로를 결정하고 해당 경로로 패킷을 보내는 과정

#### 단편화
- **MTU** : 하나의 IP 패킷(IP 헤더와 페이로드)이 네트워크를 통해 한 번에 전송될 수 있는 최대 크기
- 일반적인 MTU 크기는 1500바이트

![image](https://github.com/user-attachments/assets/b06a7c7e-09d5-4e50-a7e4-80633c116d5f)

- **식별자** : 특정 패킷이 어떤 데이터에서 쪼개진 패킷인지 식별하기 위해 사용되는 필드
- **플래그** : 3비트로 구성된 필드로, 첫 비트는 미사용, 두 번째는 DF(Don't Fragment), 세번쨰는 MF(More Fragment)를 나타낸다.
- **단편화 오프셋** : 특정 패킷이 초기 데이터에서 얼마나 떨어져 있는지가 명시된 필드

### 신뢰할 수 없는 통신과 비연결형 통신
- **신뢰할 수 없는 프로토콜** : 패킷이 수신지까지 제대로 전송되었다고 보장하지 않는 프로토콜
- **비연결형 프로토콜** : 패킷을 주고받기 전에 사전 연결 과정을 거치지 않는다.

## IP 주소의 구조
![image](https://github.com/user-attachments/assets/11d84cfc-61ac-4268-ba6b-f236987bba9f)

- **네트워크 주소** : 호스트가 속한 네트워크를 특정하기 위해 사용된다.
- **호스트 주소** : 네트워크에 속한 호스트를 특정하기 위해 사용한다.

### 클래스 풀 주소 체계
![image](https://github.com/user-attachments/assets/57d6136d-5214-4b13-b394-a452054eb3c4)
![image](https://github.com/user-attachments/assets/88636da4-a5f0-4e72-a81e-7b0fa5664a59)

- **클래스** : 네트워크의 크기에 따라 유형별로 IP 주소를 분류하는 기준
- **클래스풀 주소 체계** : 클래스를 바탕으로 IP 주소를 관리하는 주소 체계

### 클래스리스 주소 체계와 서브넷 마스크
![image](https://github.com/user-attachments/assets/96609824-7834-43a6-8f02-433f87618a04)

- **클래스리스 주소 체계** : 클래스를 이용하지 않고 네트워크와 호스트를 구분하는 방식
- **서브넷** : IP 주소에서 네트워크 주소로 구분할 수 있는 네트워크의 부분집합
- **서브넷 마스크** : 서브넷을 구분하는 비트열
- **서브넷팅** : 서브넷 마스크를 이용해 원하는 크기로 클래스를 더 잘게 쪼개어 사용하는 것

> #### CIDR 표기 - 서브넷 마스크 표기법
> IP 주소/서브넷 마스크상의 1의 개수 (예 : '192.168.20.3/30')

## 공인 IP 주소와 사설 IP 주소
#### 공인 IP 주소
- 전 세계에서 고유한 IP 주소
- 인터넷을 비롯한 네트워크 간 통신에 사용되는 IP 주소
- ISP나 공인 IP 주소 할당 기관을 통해 할당받을 수 있다.

#### 사설 IP 주소
![image](https://github.com/user-attachments/assets/ec01573d-e7d5-4952-b0ac-b0c63fde6056)

- 사설 네트워크에서 사용하기 위한 IP 주소
- **사설 네트워크**
  - 외부 네트워크에 공개되지 않은 네트워크 
  - 일반적으로 라우터(공유기)를 중심으로 구성된 LAN

## IP 주소의 할당
### 정적 할당
![image](https://github.com/user-attachments/assets/ba4e4e95-6e03-4292-bb61-9dec0a777448)

- 직접 수작업으로 IP 주소를 부여하는 방식

#### 게이트웨이
![image](https://github.com/user-attachments/assets/fb7ffb02-c886-475b-8322-02bdab478fe2)

- 서로 다른 네트워크를 연결하는 하드웨어적/소프트웨어적 수단
- **기본 게이트웨이** : 호스트가 속한 네트워크의 외부로 나가기 위한 첫 기본 경로 (일반적으로 라우터/공유기의 주소)

#### DNS 주소
![image](https://github.com/user-attachments/assets/15c842e5-8066-43ab-9214-e0df371f4c2d)

- 호스트가 도메인 네임을 토대로 IP 주소를 알아내기 위해 질의하는 서버의 주소

### 동적 할당: DHCP
- **동적 할당** : DHCP를 통해 자동으로 IP 주소를 부여하는 방식

#### DHCP
- 호스트는 DHCP 서버와 메시지를 주고받으며 동적 IP 주소를 할당받을 수 있다.
- **DHCP 서버** : 호스트에 할당 가능한 IP 주소 목록을 관리하다가, IP 주소 할당 요청을 받았을 때 IP 주소를 할당해주는 호스트

#### 특징
- 동적 IP 주소에는 사용 가능한 기간(임대 기간)이 정해져 있다.
- 동적 IP 주소는 할당받을 때마다 다른 주소를 받을 수 있다.

## IP 전송 특징의 보완: ICMP
#### 신뢰할 수 없는 비연결형 통신이라는 특징 보완
- 신뢰할 수 있는 연결형 통신을 지원하는 상위 계층의 프로토콜 이용 (TCP 등)
- 네크워크 계층의 프로토콜로 ICMP 이용

#### ICMP
![image](https://github.com/user-attachments/assets/fb7cb7ab-4ac1-4cb1-be79-d120d0189b22)

- IP 패킷의 전송과정에 대한 피드백 메시지(이하 ICMP 메시지)를 얻기 위해 사용하는 프로토콜
- ICMP 메시지를 통해 패킷이 상대방에게 어떻게 전송되었는지를 알려줄 수 있어 IP 전송의 결과를 엿볼 수 있다.

#### ICMP 메시지 종류
![image](https://github.com/user-attachments/assets/6a28ff0d-6611-4ed8-a003-4a9fafc70bf6)

#### TTL
![image](https://github.com/user-attachments/assets/3b5da806-fcd6-48af-9032-e7c1e19e161e)

- 패킷의 수명
- 무의미한 패킷이 네트워크상에 지속적으로 남아있는 것을 방지하기 위해 패킷이 하나의 라우터를 거칠 때마다 TTL이 1씩 감소한다.
- TTL 필드가 0이 되면 해당 패킷은 폐기되고, 패킷을 송수신한 호스트에서 ICMP 메시지가 전송된다.

## IP 주소와 MAC 주소의 대응 : ARP
![image](https://github.com/user-attachments/assets/294721f5-d348-409d-9e19-a7b1cb606f8d)

- **ARP** : 동일 네트워크 내에 있는 송수신 대상의 IP 주소를 통해 MAC 주소를 알아내는 프로토콜

#### ARP 요청
- 브로드캐스트 메시지
- 알고 싶은 MAC 주소에 대응되는 IP 주소가 포함되어 있다.
- 호스트들은 ARP 요청에 포함된 IP 주소를 확인해 자신과 관련이 없는 IP 주소일 경우에는 무시하고, 자신의 IP 주소일 경우에는 ARP 응답을 전송한다.

#### ARP 응답
- 응답을 보내는 호스트의 MAC 주소가 포함되어 있다.

#### ARP 테이블
- <IP 주소, MAC 주소>
- ARP 테이블 항복은 일정 시간이 지나면 삭제되고, 임의로 삭제할 수도 있다.
